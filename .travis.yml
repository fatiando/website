# Configuration file for TravisCI

language: python

python: "3.6"

os: linux

# Use the container builds so we don't need sudo priviledges
sudo: false

# Only build pushes to the master branch
branches:
    only:
        - master

# Define environment variables common to all builds
env:
    global:
        # Encrypted variables
        # Github Token for pushing the built HTML (GH_TOKEN)
        - secure: "BPGIqOKUaDVzNAelMpArFy0Kqg25w2x3casYxu2/ZQowrt9oTujmnGVFekIXvu5KPKEILQezkAZ7Jhloy7uB8gbgETHWDHqMy4h/hxQrbV4eEJJ5X4A/zAIYSwpd6YU5iJGc0Io6gXCBrq0O8SJ3VmEWnK0sB8vCZJ+NvHGXqFA="

# Setup the build environment
install:
    # Install the requirements
    - pip install -r requirements.txt

# Build the documentation HTML
script:
    - make all

# Deploy the built HTML to Github pages
deploy:
    - provider: script
      script: ci/deploy-gh-pages.sh
      skip_cleanup: true
      on:
          branch: master

# Don't send out emails every time a build fails
notifications:
    email: false
